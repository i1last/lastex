# LasTeX: Среда автоматизированной верстки отчетов (ГОСТ 7.32-2017)

Проект представляет собой контейнеризированную среду для подготовки технической документации и отчетов в системе верстки LaTeX. Сборка осуществляется внутри изолированного Docker-контейнера, что гарантирует идентичность выходных файлов на любой машине и отсутствие конфликтов зависимостей.

Оформление документов соответствует требованиям **ГОСТ 7.32-2017** «Отчет о научно-исследовательской работе».

## 1. Системные требования

*   **ОС:** Windows 10/11 (с поддержкой WSL2).
*   **ПО:**
    *   [Docker Desktop](https://www.docker.com/products/docker-desktop) (запущен и настроен на использование WSL2).
    *   [VS Code](https://code.visualstudio.com/).
    *   Git.

## 2. Первоначальная настройка

### 2.1. Настройка Git LFS
Для эффективного хранения бинарных файлов (PDF, изображения) требуется Git Large File Storage.

1.  Установите Git LFS (инструкция на [git-lfs.com](https://git-lfs.com/)).
2.  Инициализируйте LFS в корне репозитория:
    ```bash
    git lfs install
    git lfs track "*.pdf"
    git add .gitattributes
    ```

### 2.2. Установка проприетарных шрифтов
Для соответствия требованиям нормоконтроля используются шрифты семейства Times New Roman и моноширинный шрифт JetBrains Mono.

1.  Создайте директорию `fonts/` в корне проекта (если отсутствует).
2.  Скопируйте в неё файлы шрифтов из системной директории `C:\Windows\Fonts` (или иного источника).
    **Требуемые файлы (регистр имен важен для Linux-контейнера):**
    *   `times.ttf` (Regular)
    *   `timesbd.ttf` (Bold)
    *   `timesi.ttf` (Italic)
    *   `timesbi.ttf` (Bold Italic)

### 2.3. Интеграция с VS Code

**Настройка горячих клавиш:**
Для запуска сборки по `Ctrl + Alt + B` используется конфигурация в `keybindings.json`.

**Рекомендуемые расширения:**
*   **LaTeX Workshop**: для подсветки синтаксиса (автоматическая сборка должна быть отключена, см. настройки проекта).

## 3. Структура проекта

Система сборки полагается на строгую иерархию директорий для автоматической генерации имен выходных файлов.

```text
.
├── compile.bat           # Скрипт-обертка для запуска Docker
├── Dockerfile            # Конфигурация среды сборки
├── Makefile              # Сценарий сборки (внутри контейнера)
├── template/             # Шаблон отчета (_report.tex и вспомогательные файлы)
├── reports/              # Рабочая директория пользователя
│   └── sem_3/            # Пример семестра
│       └── pioa/         # Дисциплина
│           └── lab-1/    # Папка конкретной работы
│               ├── _report.tex  # Точка входа (копия из template/)
│               ├── main.tex     # Основной текст
│               └── out/         # Результаты сборки (pioa_lab-1.pdf)
└── ...
```

## 4. Порядок работы

### 4.1. Создание нового отчета
1.  Создайте директорию для работы, соблюдая иерархию (например: `reports/sem_3/physics/lab_01`).
2.  Скопируйте файл `template/_report.tex` в созданную директорию. **Имя файла менять запрещено.**
3.  Скопируйте в папку другие ресурсы (напр, изображения), если необходимо.

### 4.2. Написание текста
*   Откройте `_report.tex` и заполните секцию конфигурации (Название, ФИО, Преподаватель).
*   Основной текст работы рекомендуется писать в отдельных файлах (например, `main.tex`, `chapter1.tex`) и подключать их через `\input{...}` в `_report.tex`.
*   Используйте готовые сниппеты (начните вводить `table`, `img`, `code` для появления подсказок).

### 4.3. Компиляция
Сборка запускается одной из команд:
1.  **Через VS Code:** Находясь в любом файле отчета (вы должны находиться на одном уровне директории с `_report.tex`), нажмите `Ctrl + Alt + B`. _(Если не уверены, то просто откройте текущий `_report.tex` и нажмите `Ctrl + Alt + B`.)_
2.  **Через терминал:**
    ```powershell
    .\compile.bat reports\sem_3\physics\lab_01
    ```

**Результат:**
PDF-файл будет создан в папке `out/` внутри директории работы. Имя файла генерируется автоматически на основе пути (например: `physics_lab_01.pdf`).

## 5. Дополнительные инструменты (Linter & Formatter)

Для повышения качества кода рекомендуется настроить внешние инструменты в VS Code (LaTeX Workshop).

### 5.1. Форматирование (latexindent)
1.  Загрузите `latexindent.exe` из [официального репозитория](https://github.com/cmhughes/latexindent.pl).
2.  Разместите файл в системной папке (например, `C:\Tools\latexindent.exe`). _Примечание: под системной папкой понимается та, что доступна в переменной окружения PATH._
3.  В настройках VS Code укажите путь:
    *   `latex-workshop.formatting.latexindent.path`: `C:\\Tools\\latexindent.exe`
    *   `latex-workshop.formatting.latex`: `latexindent`

### 5.2. Статический анализ (LaCheck)
**На данный момент не удалось заставить работать.**

Предполагаемый путь настройки:
1.  Загрузите [LaCheck](https://github.com/mitchmoser/LACheck).
2.  В настройках VS Code:
    *   `latex-workshop.linting.lacheck.enabled`: `true`
    *   `latex-workshop.linting.**lacheck**.exec.path`: `C:\\Tools\\lacheck.exe`

## 6. Устранение неполадок Docker

При изменении `Dockerfile` или возникновении критических ошибок сборки (например, повреждение кэша слоев) может потребоваться полная пересборка окружения.

**Очистка кэша сборки и удаление всех контейнеров:**
> ⚠️ **Внимание:** Команда удалит **все** остановленные контейнеры и неиспользуемые образы в системе, не только относящиеся к этому проекту.

```bash
docker system prune -a --volumes
```

Для диагностики состояния контейнера используйте команду входа в оболочку:
```bash
docker exec -it latex-daemon bash
```